# Flask Micro Alpha Trader
![Project Status](https://img.shields.io/badge/status-in_development-yellow)
![Python Version](https://img.shields.io/badge/python-3.13%2B-blue)
![License](https://img.shields.io/badge/license-MIT-green)  

**Flask Micro Alpha Trader**ëŠ” AI/ML ê¸°ë°˜ì˜ ìë™í™”ëœ ì£¼ì‹ ê±°ë˜ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. Alpaca APIë¥¼ í†µí•´ ì‹¤ì‹œê°„ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³ , ì•™ìƒë¸” ë¨¸ì‹ ëŸ¬ë‹ ëª¨ë¸ë¡œ ê±°ë˜ ì‹ í˜¸ë¥¼ ìƒì„±í•˜ì—¬ ìë™ìœ¼ë¡œ ê±°ë˜ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.  
ë…ë¦½ì ì¸ ì„œë¹„ìŠ¤ ëª¨ë“ˆê³¼ ë¹„ë™ê¸° ì‘ì—… ì²˜ë¦¬(Celery)ì— ì¤‘ì ì„ ë‘” í™•ì¥ ê°€ëŠ¥í•œ ëª¨ë†€ë¦¬ì‹ ì•„í‚¤í…ì²˜(Scalable Monolithic Architecture)ë¡œ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥


|  Pillar | Feature | Description |
| :--- | :--- | :--- |
|  **Intelligent Decision** | **Ensemble AI Model** | LightGBMê³¼ XGBoostë¥¼ ê²°í•©í•˜ì—¬ ì˜ˆì¸¡ ì‹ ë¢°ë„ë¥¼ ê·¹ëŒ€í™”í•©ë‹ˆë‹¤. |
| | **Dynamic Confidence** | ëª¨ë¸ ì˜ˆì¸¡ê°’ì˜ í‘œì¤€í¸ì°¨ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‹¤ì‹œê°„ ì‹ ë¢°ë„ë¥¼ ê³„ì‚°í•˜ì—¬ ë¶ˆí™•ì‹¤í•œ ì‹œì¥ ìƒí™©ì— ëŒ€ì‘í•©ë‹ˆë‹¤. |
| | **Auto-Tuning** | Optunaë¥¼ ì‚¬ìš©í•˜ì—¬ ì£¼ê¸°ì ìœ¼ë¡œ í•˜ì´í¼íŒŒë¼ë¯¸í„°ë¥¼ ìµœì í™”í•˜ê³  ëª¨ë¸ ì„±ëŠ¥ì„ ìœ ì§€í•©ë‹ˆë‹¤. |
|  **Robust Automation** | **Automated Pipeline** | Celeryë¥¼ ì´ìš©í•´ ë°ì´í„° ìˆ˜ì§‘, ì˜ˆì¸¡, ê±°ë˜ ì‹¤í–‰ê¹Œì§€ì˜ ì „ ê³¼ì •ì„ 10ë¶„ë§ˆë‹¤ ìë™ ì‹¤í–‰í•©ë‹ˆë‹¤. |
| | **Smart Rebalancing** | ì‹ ê·œ ë§¤ìˆ˜ ì‹ í˜¸ ë°œìƒ ì‹œ, ê¸°ì¡´ í¬ì§€ì…˜ì˜ ê¸°ëŒ€ìˆ˜ìµë¥ ê³¼ ë¹„êµí•˜ì—¬ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ë™ì ìœ¼ë¡œ ë¦¬ë°¸ëŸ°ì‹±í•©ë‹ˆë‹¤. |
| | **Monitoring Dashboard** | Grafanaì™€ Prometheusë¥¼ í†µí•´ ì‹œìŠ¤í…œ ë©”íŠ¸ë¦­, AI ì„±ëŠ¥, í¬íŠ¸í´ë¦¬ì˜¤ ìƒíƒœë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤. |
|  **Systematic Risk** | **Volatility-based Sizing** | ì‹œì¥ ë³€ë™ì„±ì— ë”°ë¼ í¬ì§€ì…˜ í¬ê¸°ë¥¼ ë™ì ìœ¼ë¡œ ì¡°ì ˆí•˜ì—¬ ë¦¬ìŠ¤í¬ ë…¸ì¶œì„ ê´€ë¦¬í•©ë‹ˆë‹¤. |
| | **Strict Stop-Loss** | ê°œë³„ í¬ì§€ì…˜(-5%) ë° ì¼ì¼ í¬íŠ¸í´ë¦¬ì˜¤(-2%) ì†ì‹¤ í•œë„ë¥¼ ì—„ê²©íˆ ì ìš©í•˜ì—¬ ì¹˜ëª…ì  ì†ì‹¤ì„ ë°©ì§€í•©ë‹ˆë‹¤. |
| | **Real-time Alerts** | ì£¼ìš” ê±°ë˜ ë° ì‹œìŠ¤í…œ ì´ë²¤íŠ¸ ë°œìƒ ì‹œ Discordë¥¼ í†µí•´ ì¦‰ì‹œ ì•Œë¦¼ì„ ì œê³µí•©ë‹ˆë‹¤. |

### ğŸ¤– AI ê¸°ë°˜ íŠ¸ë ˆì´ë”©
- **ì•™ìƒë¸” ëª¨ë¸**: LightGBMê³¼ XGBoostë¥¼ ê²°í•©í•œ ì•™ìƒë¸” ë°©ì‹ìœ¼ë¡œ ì˜ˆì¸¡ ì‹ ë¢°ë„ í–¥ìƒ
- **ë™ì  ì‹ ë¢°ë„ ê³„ì‚°**: ëª¨ë¸ ì˜ˆì¸¡ê°’ì˜ í‘œì¤€í¸ì°¨ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‹ ë¢°ë„ ë™ì  ê³„ì‚°
- **ìë™ í•˜ì´í¼íŒŒë¼ë¯¸í„° ìµœì í™”**: Optunaë¥¼ ì‚¬ìš©í•œ ì£¼ê¸°ì  íŒŒë¼ë¯¸í„° íŠœë‹
- **ì‹¤ì‹œê°„ ì˜ˆì¸¡**: 120ì¼ê°„ì˜ ê³¼ê±° ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì¼ì¼ ìˆ˜ìµë¥  ì˜ˆì¸¡

### ğŸ”„ ìë™í™” íŠ¸ë ˆì´ë”© íŒŒì´í”„ë¼ì¸
- **ì£¼ê¸°ì  ì‹¤í–‰**: Celery Beatë¥¼ í†µí•œ 5ë¶„ë§ˆë‹¤ ìë™ íŠ¸ë ˆì´ë”© ì‹¤í–‰
- **ìŠ¤ë§ˆíŠ¸ ì‹ í˜¸ ìƒì„±**: AI ì‹ ë¢°ë„ì™€ ì˜ˆì¸¡ ìˆ˜ìµë¥ ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ BUY/SELL/HOLD ì‹ í˜¸
- **í¬íŠ¸í´ë¦¬ì˜¤ ë¦¬ë°¸ëŸ°ì‹±**: ìƒˆë¡œìš´ ê¸°íšŒ ë°œê²¬ ì‹œ ê¸°ì¡´ í¬ì§€ì…˜ êµì²´ ë¡œì§
- **ì†ì ˆ/ìµì ˆ ìë™í™”**: ì„¤ì •ëœ ì†ì‹¤(-5%) ë° ì´ìµ(+10%) ê¸°ì¤€ì— ë”°ë¥¸ ìë™ ì²­ì‚°

### ğŸ›¡ï¸ ê³ ê¸‰ ë¦¬ìŠ¤í¬ ê´€ë¦¬
- **ë³€ë™ì„± ê¸°ë°˜ í¬ì§€ì…˜ í¬ê¸°**: ì‹œì¥ ë³€ë™ì„±ì— ë”°ë¥¸ ë™ì  íˆ¬ì ê·œëª¨ ì¡°ì ˆ
- **ì¼ì¼ ì†ì‹¤ ì œí•œ**: ì¼ì¼ ìµœëŒ€ ì†ì‹¤(-2%) ë„ë‹¬ ì‹œ 24ì‹œê°„ ê±°ë˜ ì¤‘ë‹¨
- **í¬íŠ¸í´ë¦¬ì˜¤ ì œì•½**: ìµœëŒ€ 7ê°œ í¬ì§€ì…˜, ì´ í¬íŠ¸í´ë¦¬ì˜¤ì˜ 80% ì´í•˜ íˆ¬ì
- **ì‹¤ì‹œê°„ ë¦¬ìŠ¤í¬ ëª¨ë‹ˆí„°ë§**: JSON íŒŒì¼ ê¸°ë°˜ ìƒíƒœ ê´€ë¦¬ë¡œ ì¬ì‹œì‘ í›„ì—ë„ ë¦¬ìŠ¤í¬ ìƒíƒœ ìœ ì§€

### ğŸ“Š ëª¨ë‹ˆí„°ë§ ë° ë¶„ì„
- **ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ**: Grafanaë¥¼ í†µí•œ í¬íŠ¸í´ë¦¬ì˜¤, AI ì„±ëŠ¥, ì‹œìŠ¤í…œ ë©”íŠ¸ë¦­ ì‹œê°í™”
- **ë°±í…ŒìŠ¤íŒ… ì—”ì§„**: ê³¼ê±° ë°ì´í„°ë¡œ ì „ëµ ì„±ëŠ¥ ê²€ì¦
- **ê±°ë˜ ì´ë ¥ ì¶”ì **: SQLite ê¸°ë°˜ ê±°ë˜ ê¸°ë¡ ë° ì„±ê³¼ ë¶„ì„
- **Discord ì•Œë¦¼**: ì£¼ìš” ê±°ë˜ ë° ì‹œìŠ¤í…œ ì´ë²¤íŠ¸ ì‹¤ì‹œê°„ ì•Œë¦¼

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Flask API        â”‚    â”‚      Celery Worker      â”‚    â”‚       Celery Beat       â”‚
â”‚    (REST Endpoints)     â”‚    â”‚    (Background Jobs)    â”‚    â”‚        (Scheduler)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                             â”‚                             â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚       Redis       â”‚    â”‚    Prometheus     â”‚    â”‚      Grafana      â”‚
         â”‚ (Message Broker)  â”‚    â”‚     (Metrics)     â”‚    â”‚    (Dashboard)    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


### ë°ì´í„° ë° ì œì–´ íë¦„ (Data & Control Flow)

1.  **`Celery Beat`**ê°€ 10ë¶„ë§ˆë‹¤ íŠ¸ë ˆì´ë”© íŒŒì´í”„ë¼ì¸(`smart_trading_pipeline` task)ì„ ìŠ¤ì¼€ì¤„ë§í•©ë‹ˆë‹¤.
2.  **`Celery Worker`**ê°€ íƒœìŠ¤í¬ë¥¼ ë°›ì•„ **`AlpacaService`**ë¥¼ í†µí•´ ì‹œì¥ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
3.  **`AIService`**ê°€ ìˆ˜ì§‘ëœ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§¤ìˆ˜/ë§¤ë„ ì‹ í˜¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
4.  **`TradingService`**ëŠ” ìƒì„±ëœ ì‹ í˜¸ì™€ **`RiskManager`**ì˜ íŒë‹¨ì„ ì¢…í•©í•˜ì—¬ ì‹¤ì œ ì£¼ë¬¸ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.
5.  **`Flask API`**ëŠ” ì™¸ë¶€ ìš”ì²­ì— ë”°ë¼ í˜„ì¬ ìƒíƒœë¥¼ ì¡°íšŒí•˜ê±°ë‚˜, ë°±ê·¸ë¼ìš´ë“œ ì‘ì—…ì„ ìˆ˜ë™ìœ¼ë¡œ íŠ¸ë¦¬ê±°í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
6.  ëª¨ë“  ê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” ë©”íŠ¸ë¦­ì€ **`Prometheus`**ì— ì˜í•´ ìˆ˜ì§‘ë˜ê³  **`Grafana`**ì—ì„œ ì‹œê°í™”ë©ë‹ˆë‹¤.


### í•µì‹¬ ì„œë¹„ìŠ¤ ëª¨ë“ˆ
- **AlpacaService**: Alpaca API í†µì‹  ë° ì‹œì¥ ë°ì´í„° ìˆ˜ì§‘
- **AIService**: ì•™ìƒë¸” ML ëª¨ë¸ ê´€ë¦¬ ë° ì‹ í˜¸ ìƒì„±
- **TradingService**: ì£¼ë¬¸ ì‹¤í–‰ ë° í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬
- **RiskManager**: ì‹¤ì‹œê°„ ë¦¬ìŠ¤í¬ ëª¨ë‹ˆí„°ë§ ë° ì œì–´
- **DatabaseService**: ê±°ë˜ ì´ë ¥ ë° ì„±ê³¼ ë°ì´í„° ê´€ë¦¬
- **BacktestService**: ì „ëµ ë°±í…ŒìŠ¤íŒ… ë° ì„±ê³¼ ë¶„ì„

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

- **Backend**: Flask, Gunicorn, Celery
- **AI/ML**: LightGBM, XGBoost, Optuna, NumPy, Pandas
- **Database**:
  - **SQLite**: ê±°ë˜ ë°ì´í„° ê¸°ë¡ (í”„ë¡œí† íƒ€ì´í•‘ ë‹¨ê³„ì—ì„œì˜ ë¹ ë¥¸ ê°œë°œ ë° ë¡œì»¬ í…ŒìŠ¤íŠ¸ ìš©ì´ì„±ì„ ìœ„í•´ ì„ íƒ)
  - **JSON File**: ë¦¬ìŠ¤í¬ ìƒíƒœ ê´€ë¦¬ (ì™¸ë¶€ DB ì˜ì¡´ì„± ì—†ì´ ìƒíƒœë¥¼ ë¹ ë¥´ê²Œ ë°±ì—… ë° ë³µêµ¬í•˜ëŠ” í”„ë¡œí† íƒ€ì… ìš©ë„ë¡œ ì‚¬ìš©)
  > **ì°¸ê³ **: í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ë™ì‹œì„± ì²˜ë¦¬ ë° ë°ì´í„° ë¬´ê²°ì„±ì„ ìœ„í•´ **PostgreSQL/MySQL**(ê±°ë˜ ë°ì´í„°)ê³¼ **Redis**(ì‹¤ì‹œê°„ ìƒíƒœ ê´€ë¦¬)ë¡œì˜ ì „í™˜ì„ ê¶Œì¥í•©ë‹ˆë‹¤.

- **Message Queue**: Redis
- **Monitoring**: Prometheus, Grafana, prometheus-flask-exporter
- **External API**: Alpaca Markets API
- **Containerization**: Docker, Docker Compose

## ğŸ“ˆ ì§€ì› ì¢…ëª©

**ê¸°ë³¸ ê´€ì‹¬ì¢…ëª© (32ê°œ)**:
```
AAPL, MSFT, GOOGL, TSLA, SPY, NVDA, AMZN, META, NFLX, AMD, 
JNJ, UNH, JPM, PG, CAT, XOM, V, MA, DIS, HD, KO, PEP, 
INTC, CSCO, CMCSA, VZ, T, MRK, PFE, ABT, NKE, WMT
```

## ğŸš€ ì‹œì‘í•˜ê¸°

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­
- [Docker](https://docs.docker.com/get-docker/) ë° [Docker Compose](https://docs.docker.com/compose/install/)
- [Alpaca API ê³„ì •](https://alpaca.markets/) (Paper Trading ë˜ëŠ” Live Trading)
- Discord ì›¹í›… URL (ì„ íƒì‚¬í•­, ì•Œë¦¼ìš©)

### ì„¤ì¹˜ ë° ì‹¤í–‰

1. **ì €ì¥ì†Œ í´ë¡ **
   ```bash
   git clone https://github.com/your-username/flask-micro-alpha-trader.git
   cd flask-micro-alpha-trader
   ```

2. **í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**
   ```bash
   cp .env.example .env
   nano .env
   ```

   **í•„ìˆ˜ í™˜ê²½ ë³€ìˆ˜**:
   ```env
   # Alpaca API ì„¤ì •
   ALPACA_API_KEY=your_alpaca_api_key
   ALPACA_API_SECRET=your_alpaca_secret_key
   ALPACA_PAPER=True  # Paper Trading ì‚¬ìš© ì—¬ë¶€

   # Discord ì•Œë¦¼ (ì„ íƒì‚¬í•­)
   DISCORD_WEBHOOK_URL=your_discord_webhook_url

   # JWT ë° ë³´ì•ˆ
   SECRET_KEY=your-very-secure-secret-key

   # Redis ì„¤ì •
   REDIS_URL=redis://redis:6379/0
   ```

3. **ì „ì²´ ì‹œìŠ¤í…œ ì‹œì‘**
   ```bash
   docker-compose up --build -d
   ```

4. **ë¡œê·¸ í™•ì¸**
   ```bash
   docker-compose logs -f
   ```

### ì„œë¹„ìŠ¤ ì ‘ì† ì •ë³´

| ì„œë¹„ìŠ¤ | URL | ì„¤ëª… |
|--------|-----|------|
| **API Server** | http://localhost:5000 | REST API ì—”ë“œí¬ì¸íŠ¸ |
| **Grafana** | http://localhost:3000 | ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ (admin/admin) |
| **Flower** | http://localhost:5555 | Celery ì‘ì—… ëª¨ë‹ˆí„°ë§ |
| **Prometheus** | http://localhost:9090 | ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ì„œë²„ |

## ğŸ”§ ì£¼ìš” API ì—”ë“œí¬ì¸íŠ¸

### ì¸ì¦ (JWT í† í°ì„ ìœ„í•œ ì„ì‹œ ì¸ì¦)
```bash
# ë¡œê·¸ì¸ (ê¸°ë³¸ ê³„ì •: admin/password)
curl -X POST http://localhost:5000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username": "admin", "password": "password"}'
```

### ê³„ì • ë° í¬ì§€ì…˜ ì¡°íšŒ
```bash
# JWT í† í°ì„ Authorization í—¤ë”ì— í¬í•¨
AUTH_HEADER="Authorization: Bearer YOUR_JWT_TOKEN"

# ê³„ì • ì •ë³´ ì¡°íšŒ
curl -H "$AUTH_HEADER" http://localhost:5000/api/account/info

# í˜„ì¬ í¬ì§€ì…˜ ì¡°íšŒ
curl -H "$AUTH_HEADER" http://localhost:5000/api/positions

# íŠ¹ì • ì¢…ëª© í˜„ì¬ê°€ ì¡°íšŒ
curl -H "$AUTH_HEADER" http://localhost:5000/api/price/AAPL
```

### AI ë° íŠ¸ë ˆì´ë”©
```bash
# íŠ¹ì • ì¢…ëª© AI ì‹ í˜¸ ì¡°íšŒ
curl -H "$AUTH_HEADER" http://localhost:5000/api/trading/signal/AAPL

# íŠ¸ë ˆì´ë”© íŒŒì´í”„ë¼ì¸ ìˆ˜ë™ ì‹¤í–‰
curl -H "$AUTH_HEADER" http://localhost:5000/api/trading/auto/start

# ì‹œì¥ ë°ì´í„° ì¡°íšŒ
curl -H "$AUTH_HEADER" "http://localhost:5000/api/market/bars/AAPL?limit=10"
```

### ëª¨ë¸ í•™ìŠµ ë° ìµœì í™”
```bash
# ì „ì²´ ì¢…ëª© ëª¨ë¸ í•™ìŠµ ì‹œì‘
curl -X POST -H "$AUTH_HEADER" http://localhost:5000/api/training/start/batch

# í•˜ì´í¼íŒŒë¼ë¯¸í„° ìµœì í™” ì‹œì‘
curl -X POST -H "$AUTH_HEADER" http://localhost:5000/api/hyperparameter/optimize/

# ë°±í…ŒìŠ¤íŒ… ì‹¤í–‰
curl -X POST -H "$AUTH_HEADER" http://localhost:5000/api/backtest/run \
  -H "Content-Type: application/json" \
  -d '{"symbols": ["AAPL", "MSFT"], "days": 90}'
```

### ë¦¬ìŠ¤í¬ ë° ëŒ€ì‹œë³´ë“œ
```bash
# ë¦¬ìŠ¤í¬ ìƒíƒœ ì¡°íšŒ
curl -H "$AUTH_HEADER" http://localhost:5000/api/risk/status

# ëŒ€ì‹œë³´ë“œ í†µí•© ë°ì´í„°
curl -H "$AUTH_HEADER" http://localhost:5000/api/dashboard/all_data
```

## âš™ï¸ ì„¤ì • ê´€ë¦¬

### ë¦¬ìŠ¤í¬ ê´€ë¦¬ ì„¤ì • (`app/config.py`)
```python
# í¬íŠ¸í´ë¦¬ì˜¤ ì œí•œ
RISK_MAX_PORTFOLIO_EXPOSURE = 0.80    # ìµœëŒ€ 80% íˆ¬ì
RISK_MAX_POSITIONS = 7                # ìµœëŒ€ 7ê°œ í¬ì§€ì…˜
RISK_MAX_POSITION_SIZE = 0.10         # ê°œë³„ í¬ì§€ì…˜ ìµœëŒ€ 10%

# ì†ìµ ê¸°ì¤€
RISK_STOP_LOSS_PCT = -0.05           # -5% ì†ì ˆ
RISK_TAKE_PROFIT_PCT = 0.10          # +10% ìµì ˆ
RISK_MAX_DAILY_LOSS = -0.02          # ì¼ì¼ ìµœëŒ€ -2% ì†ì‹¤

# AI ì‹ í˜¸ ì„ê³„ê°’
AI_SIGNAL_BUY_THRESHOLD = 0.005      # ë§¤ìˆ˜ ì‹ í˜¸: +0.5% ì´ìƒ ì˜ˆì¸¡
AI_SIGNAL_SELL_THRESHOLD = -0.005    # ë§¤ë„ ì‹ í˜¸: -0.5% ì´í•˜ ì˜ˆì¸¡
AI_CONFIDENCE_THRESHOLD = 0.7        # ìµœì†Œ ì‹ ë¢°ë„ 70%
```

### Celery ìŠ¤ì¼€ì¤„ (`app/celery_config.py`) 
# UTC ê¸°ì¤€
```python
beat_schedule = {
    'smart-trading-pipeline': {
        'task': 'app.tasks.smart_trading_pipeline',
        'schedule': crontab(minute='*/10', hour='11-23', day_of_week='mon-fri'),  
    },
    'daily-model-finetuning': {
        'task': 'app.tasks.train_models_batch',
        'schedule': crontab(hour=23, minute=0, day_of_week='mon-fri'),
    },
    'optimize-hyperparameters': {
        'task': 'app.tasks.optimize_hyperparameters_for_watchlist',
        'schedule': crontab(hour=23, minute=0, day_of_week='mon-fri'),
    }
}
```

## ğŸ“Š ëª¨ë‹ˆí„°ë§

### Grafana ëŒ€ì‹œë³´ë“œ
ì‹œìŠ¤í…œ ì‹œì‘ í›„ http://localhost:3000 ì ‘ì† (admin/admin)

**ì£¼ìš” ë©”íŠ¸ë¦­**:
- í¬íŠ¸í´ë¦¬ì˜¤ ê°€ì¹˜ ì¶”ì´
- ì¼ì¼ ê±°ë˜ëŸ‰ ë° ìˆ˜ìµë¥ 
- AI ëª¨ë¸ ì‹ ë¢°ë„
- ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ë¥ 
- Celery ì‘ì—… ìƒíƒœ

### ë¡œê·¸ ëª¨ë‹ˆí„°ë§
```bash
# ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸
docker-compose logs -f flask
docker-compose logs -f celery_worker
docker-compose logs -f celery_beat

# íŠ¹ì • ì„œë¹„ìŠ¤ ë¡œê·¸
docker logs alpha-trader-flask
```

## ğŸ§ª ë°±í…ŒìŠ¤íŒ…

ì‹œìŠ¤í…œì— ë‚´ì¥ëœ ë°±í…ŒìŠ¤íŒ… ì—”ì§„ì„ ì‚¬ìš©í•˜ì—¬ ì „ëµ ì„±ëŠ¥ì„ ê²€ì¦í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```bash
# 90ì¼ê°„ AAPL, MSFT ë°±í…ŒìŠ¤íŒ…
curl -X POST -H "$AUTH_HEADER" http://localhost:5000/api/backtest/run \
  -H "Content-Type: application/json" \
  -d '{
    "symbols": ["AAPL", "MSFT"], 
    "days": 90,
    "initial_capital": 100000
  }'
```

**ë°±í…ŒìŠ¤íŒ… ê²°ê³¼ ì˜ˆì‹œ**:
```json
{
  "status": "success",
  "performance": {
    "total_return": 0.1234,
    "annualized_return": 0.4567,
    "sharpe_ratio": 1.23,
    "max_drawdown": -0.0567,
    "win_rate": 0.65
  }
}
```

## ğŸ¤” ì„¤ê³„ ê²°ì • ë° ê°œì„  ë°©í–¥ (Trade-offs and Future Improvements)

ì´ í”„ë¡œì íŠ¸ëŠ” **ê°œì¸ ì—°êµ¬ ë° í•™ìŠµ ëª©ì **ì— ë§ì¶°, **ë¹„ìš© íš¨ìœ¨ì„±ê³¼ ë¹ ë¥¸ ê°œë°œ ì†ë„**ë¥¼ ìµœìš°ì„ ìœ¼ë¡œ ê³ ë ¤í•˜ì—¬ ëª‡ ê°€ì§€ ê¸°ìˆ ì  ê²°ì •ì„ ë‚´ë ¸ìŠµë‹ˆë‹¤. í–¥í›„ í”„ë¡œë•ì…˜ í™˜ê²½ìœ¼ë¡œ ë°œì „ì‹œí‚¨ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤.

*   **Database**: í˜„ì¬ì˜ SQLite/JSON íŒŒì¼ êµ¬ì¡°ëŠ” ë™ì‹œì„± ë° ë°ì´í„° ë¬´ê²°ì„±ì— í•œê³„ê°€ ìˆìŠµë‹ˆë‹¤. **PostgreSQL**ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ì—¬ íŠ¸ëœì­ì…˜ì„ ë³´ì¥í•˜ê³ , **Redis**ë¥¼ ë„ì…í•˜ì—¬ ì‹¤ì‹œê°„ ë¦¬ìŠ¤í¬ ìƒíƒœë¥¼ ë” ì•ˆì •ì ìœ¼ë¡œ ê´€ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.
*   **Architecture**: í˜„ì¬ëŠ” ëª¨ë“ˆí˜• ëª¨ë†€ë¦¬ì‹ êµ¬ì¡°ì§€ë§Œ, AI ëª¨ë¸ ì„œë¹™(AIService) ë¶€ë¶„ì˜ ë¶€í•˜ê°€ ì»¤ì§ˆ ê²½ìš°, ì´ë¥¼ ë…ë¦½ì ì¸ **FastAPI ê¸°ë°˜ì˜ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¡œ ë¶„ë¦¬**í•˜ì—¬ ë…ë¦½ì ì¸ í™•ì¥ì„±ì„ í™•ë³´í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
*   **Testing**: í˜„ì¬ ë‹¨ìœ„/í†µí•© í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤. **pytest**ë¥¼ ë„ì…í•˜ì—¬ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§(ë¦¬ìŠ¤í¬ ê´€ë¦¬, ì£¼ë¬¸ ì‹¤í–‰)ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³ , **CI íŒŒì´í”„ë¼ì¸(e.g., GitHub Actions)ì— í†µí•©**í•˜ì—¬ ì½”ë“œ ì•ˆì •ì„±ì„ í™•ë³´í•´ì•¼ í•©ë‹ˆë‹¤.
*   **Message Queue**: í˜„ì¬ Redisë¥¼ ë‹¨ìˆœ ë©”ì‹œì§€ ë¸Œë¡œì»¤ë¡œ ì‚¬ìš©í•˜ê³  ìˆì§€ë§Œ, ë” ë³µì¡í•œ ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ë¥¼ ìœ„í•´ì„œëŠ” **Kafka**ë‚˜ **RabbitMQ**ë¥¼ ë„ì…í•˜ì—¬ ë°ì´í„° íŒŒì´í”„ë¼ì¸ì˜ ì•ˆì •ì„±ê³¼ í™•ì¥ì„±ì„ ë†’ì´ëŠ” ê²ƒì„ ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

1. **API í‚¤ ë³´ì•ˆ**: `.env` íŒŒì¼ì„ ì ˆëŒ€ ê³µê°œ ì €ì¥ì†Œì— ì»¤ë°‹í•˜ì§€ ë§ˆì„¸ìš”
2. **Paper Trading**: ì‹¤ì œ ìê¸ˆ íˆ¬ì… ì „ Paper Tradingìœ¼ë¡œ ì¶©ë¶„í•œ í…ŒìŠ¤íŠ¸ ìˆ˜í–‰
3. **JWT í† í°**: ê¸°ë³¸ 24ì‹œê°„ ë§Œë£Œ, í”„ë¡œë•ì…˜ì—ì„œëŠ” ë” ì§§ê²Œ ì„¤ì • ê¶Œì¥
4. **ë°©í™”ë²½**: í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ë¶ˆí•„ìš”í•œ í¬íŠ¸ ì°¨ë‹¨

## ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œ

1. **Alpaca API ì—°ê²° ì˜¤ë¥˜**
   ```bash
   # API í‚¤ í™•ì¸
   curl -H "$AUTH_HEADER" http://localhost:5000/api/test/connection
   ```

2. **ëª¨ë¸ íŒŒì¼ ì—†ìŒ ì˜¤ë¥˜**
   ```bash
   # ëª¨ë¸ í•™ìŠµ ì‹¤í–‰
   curl -X POST -H "$AUTH_HEADER" http://localhost:5000/api/training/start/batch
   ```

3. **ë©”ëª¨ë¦¬ ë¶€ì¡±**
   ```bash
   # Docker ë¦¬ì†ŒìŠ¤ í™•ì¸
   docker stats
   # ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘
   docker-compose restart
   ```

4. **Celery ì‘ì—… ì‹¤íŒ¨**
   ```bash
   # Celery ìƒíƒœ í™•ì¸
   docker-compose logs celery_worker
   # Flowerì—ì„œ ìƒì„¸ í™•ì¸: http://localhost:5555
   ```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
flask-micro-alpha-trader/
â”œâ”€â”€ app/                          # Flask ì• í”Œë¦¬ì¼€ì´ì…˜
â”‚   â”œâ”€â”€ services/                 # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ alpaca_service.py     # Alpaca API í†µì‹ 
â”‚   â”‚   â”œâ”€â”€ ai_service.py         # AI ëª¨ë¸ ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ trading_service.py    # ê±°ë˜ ì‹¤í–‰
â”‚   â”‚   â”œâ”€â”€ risk_manager.py       # ë¦¬ìŠ¤í¬ ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ database_service.py   # ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ backtest_service.py   # ë°±í…ŒìŠ¤íŒ… ì—”ì§„
â”‚   â”‚   â””â”€â”€ optimizer_service.py  # í•˜ì´í¼íŒŒë¼ë¯¸í„° ìµœì í™”
â”‚   â”œâ”€â”€ __init__.py              # Flask ì•± íŒ©í† ë¦¬ ë° ë¼ìš°íŠ¸
â”‚   â”œâ”€â”€ tasks.py                 # Celery ë°±ê·¸ë¼ìš´ë“œ ì‘ì—…
â”‚   â”œâ”€â”€ celery_config.py         # Celery ìŠ¤ì¼€ì¤„ ì„¤ì •
â”‚   â””â”€â”€ config.py                # í™˜ê²½ë³„ ì„¤ì •
â”œâ”€â”€ models/                      # í•™ìŠµëœ AI ëª¨ë¸ (ìë™ ìƒì„±)
â”œâ”€â”€ best_params/                 # ìµœì í™”ëœ í•˜ì´í¼íŒŒë¼ë¯¸í„° (ìë™ ìƒì„±)
â”œâ”€â”€ database/                    # SQLite ë°ì´í„°ë² ì´ìŠ¤ (ìë™ ìƒì„±)
â”œâ”€â”€ grafana/                     # Grafana ì„¤ì •
â”‚   â””â”€â”€ provisioning/            # ëŒ€ì‹œë³´ë“œ ë° ë°ì´í„°ì†ŒìŠ¤
â”œâ”€â”€ logs/                        # ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸ (ìë™ ìƒì„±)
â”œâ”€â”€ docker-compose.yml           # ì„œë¹„ìŠ¤ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
â”œâ”€â”€ Dockerfile                   # ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë¯¸ì§€
â”œâ”€â”€ requirements.txt             # Python ì˜ì¡´ì„±
â”œâ”€â”€ prometheus.yml               # Prometheus ì„¤ì •
â”œâ”€â”€ gunicorn_config.py          # Gunicorn ì„¤ì •
â””â”€â”€ .env.example                # í™˜ê²½ ë³€ìˆ˜ í…œí”Œë¦¿
```

## ğŸ“„ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„ ìŠ¤ í•˜ì— ë°°í¬ë©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ `LICENSE` íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.

## âš ï¸ ë©´ì±… ì¡°í•­

ì´ ì†Œí”„íŠ¸ì›¨ì–´ëŠ” êµìœ¡ ë° ì—°êµ¬ ëª©ì ìœ¼ë¡œë§Œ ì œê³µë©ë‹ˆë‹¤. ì‹¤ì œ ê±°ë˜ì—ì„œ ë°œìƒí•˜ëŠ” ì†ì‹¤ì— ëŒ€í•´ ê°œë°œìëŠ” ì±…ì„ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤. íˆ¬ìëŠ” ë³¸ì¸ì˜ íŒë‹¨ê³¼ ì±…ì„ í•˜ì— ì´ë£¨ì–´ì ¸ì•¼ í•©ë‹ˆë‹¤.
